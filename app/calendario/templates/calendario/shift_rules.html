{% extends 'base.html' %}
{% block content %}
<h1>シフト計算詳細設定</h1>
<form method="post" id="rules-form">
    {{ form.hidden_tag() }}
    {{ form.max_consecutive_days(id='max_consecutive_days_hidden') }}
    {{ form.min_staff_per_day(id='min_staff_per_day_hidden') }}
    {{ form.forbidden_pairs(id='forbidden_pairs_hidden') }}
    {{ form.required_pairs(id='required_pairs_hidden') }}
    {{ form.employee_attributes(id='employee_attributes_hidden') }}
    {{ form.required_attributes(id='required_attributes_hidden') }}

    <div>
        <label>連勤最大日数</label>
        <input type="number" id="max_consecutive_days_input">
        <button type="button" id="max_consecutive_days_add">確定</button>
        <ul id="max_consecutive_days_list"></ul>
    </div>

    <div>
        <label>最低人数</label>
        <input type="number" id="min_staff_per_day_input">
        <button type="button" id="min_staff_per_day_add">確定</button>
        <ul id="min_staff_per_day_list"></ul>
    </div>

    <div>
        <label>禁止組み合わせ</label><br>
        <select id="forbidden_a">
            {% for emp in employees %}<option value="{{ emp }}">{{ emp }}</option>{% endfor %}
        </select>
        <select id="forbidden_b">
            {% for emp in employees %}<option value="{{ emp }}">{{ emp }}</option>{% endfor %}
        </select>
        <button type="button" id="forbidden_pairs_add">確定</button>
        <ul id="forbidden_pairs_list"></ul>
    </div>

    <div>
        <label>必須組み合わせ</label><br>
        <select id="required_a">
            {% for emp in employees %}<option value="{{ emp }}">{{ emp }}</option>{% endfor %}
        </select>
        <select id="required_b">
            {% for emp in employees %}<option value="{{ emp }}">{{ emp }}</option>{% endfor %}
        </select>
        <button type="button" id="required_pairs_add">確定</button>
        <ul id="required_pairs_list"></ul>
    </div>

    <div>
        <label>従業員属性</label><br>
        <select id="attr_employee">
            {% for emp in employees %}<option value="{{ emp }}">{{ emp }}</option>{% endfor %}
        </select>
        {% for attr in attributes %}
            <label><input type="checkbox" class="attr_cb" value="{{ attr }}">{{ attr }}</label>
        {% endfor %}
        <button type="button" id="attr_add">確定</button>
        <ul id="attr_list"></ul>
    </div>

    <div>
        <label>属性ごとの１日当たりの必要人数</label><br>
        <select id="req_attr_attr">
            {% for attr in attributes %}<option value="{{ attr }}">{{ attr }}</option>{% endfor %}
        </select>
        <input type="number" id="req_attr_num">
        <button type="button" id="req_attr_add">確定</button>
        <ul id="req_attr_list"></ul>
    </div>

    {{ form.submit() }}
</form>
<p><a href="{{ url_for('calendario.shift') }}">戻る</a></p>
<script src="{{ url_for('static', filename='js/shift_rules.js') }}"></script>
{% endblock %}
